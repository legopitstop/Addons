import{directionToOffset}from"../utils";export class MagnetBlockComponent{constructor(t,e="magnet:powered"){this.radius=t,this.poweredState=e,this.onPlayerInteract=this.onPlayerInteract.bind(this),this.onTick=this.onTick.bind(this)}onPlayerInteract(t){const e=t.block.permutation.getState(this.poweredState);t.block.setPermutation(t.block.permutation.withState(this.poweredState,!e))}teleport(t,e,o){var i=directionToOffset(o);t.runCommand(`execute positioned ${e.x} ${e.y} ${e.z} run tp @e[type=item,r=${this.radius}] ~${i.x} ~${i.y} ~${i.z}`),t.runCommand(`execute positioned ${e.x} ${e.y} ${e.z} run tp @e[type=xp_orb,r=${this.radius}] ~${i.x} ~${i.y} ~${i.z}`)}onTick(t){if(!t.block.permutation.getState(this.poweredState))return;const e=t.block.permutation.getState("minecraft:facing_direction");this.teleport(t.dimension,t.block.location,e)}}